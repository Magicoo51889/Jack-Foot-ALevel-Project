# 2.2.3 Cycle 3

## Design <a href="#design" id="design"></a>

### Objectives <a href="#objectives" id="objectives"></a>

In this cycle I aim to be creating an entity and enemy class that extends the entity class so that I can re-use to reduce the amount of code being written, so that the game is smaller to load and run. This makes it less intensive for slower computers and means that my code is better structured and easier to read/debug. Additionally the entity class should make it easier to add new sprites to the game, as they all branch off of the same class and this means they inherit the structure of that class, without having to recode the same functionality.&#x20;

Furthermore I will be implementing a key system to be able to identify different objects in the game so that I can track what object is which with a simple sting of characters, which could be in 4 bit binary as this would allow for 16 different unique keys for things such as the player or the player's lasers, or the enemies.

* [x] Create entity class
* [x] Add player to the entity class
* [x] Create enemy class
* [x] Enemy loads into the game
* [ ] Unique object keys

### Usability Features <a href="#usability-features" id="usability-features"></a>

### Key Variables <a href="#key-variables" id="key-variables"></a>

| Variable Name       | Use                                                                                                                                                                                                                                                       |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| \[OBJECT]\_CATEGORY | This constant is one that is assigned to each different object, which is unique to that one object, and makes identifying each object easier.                                                                                                             |
| Entity              | This is the parent class that all my sprites will inherit to be able to simplify my code and to make it easier to add sprites in the future                                                                                                               |
| Enemy               | This is the parent class of any enemies that I make, and it will allow me to add enemies quickly and easily, whilst also reducing the amout of code that I write, reducing the size of the game, and making debugging easier.                             |
| Player              | This will be a child class that extends the entity class, and this will not be used to make anything else, as this is simply just the player. It will reduce the complexity of making the player however as it is done via the same process as my enemy.  |

### Pseudocode <a href="#pseudocode" id="pseudocode"></a>

{% tabs %}
{% tab title="Entity Class" %}
```
class Entity extends Phaser.Sprite
    scene = current scene
    
    constructor
        super(scene, x, y, texture)
        this scene = scene
 end class     
```
{% endtab %}

{% tab title="Enemy Class" %}
```
class Enemy extends Entity
    scene: Phaser.scene
    X: Number
    Y: Number
    texture: string
    
    create(texture)
        add image (X, Y, texture)
        scale to 25%
    
    end function
end class
```
{% endtab %}
{% endtabs %}

## Development <a href="#development" id="development"></a>

### Outcome <a href="#outcome" id="outcome"></a>

{% tabs %}
{% tab title="entity.ts" %}
{% code title="entity.ts" %}
```typescript
import Phaser from 'phaser';

export default class Entity extends Phaser.GameObjects.Sprite{
    scene:Phaser.Scene;

    constructor(scene:Phaser.Scene, x:number, y:number, texture:string){
        super(scene, x, y, texture);
        this.scene = scene;
    }
}
```
{% endcode %}
{% endtab %}

{% tab title="enemy.ts" %}
{% code title="enemy.ts" %}
```typescript
import Phaser from "phaser";
import Entity from './entity'

export default class Enemy extends Entity {
    scene: Phaser.Scene;

    constructor(scene: Phaser.Scene, x: number, y: number, texture: string) {
        super (scene, 0, 0, texture);
        this.x = x;
        this.y = y;
        this.scene = scene;
    }

    create(scene, texture: string){
        scene.add.sprite(this.x, this.y, texture);
        this.setOrigin(0,0.5);
        this.setScale(0.25);
        console.log("enemy loaded with the texture of: " + texture);

        // moves enemy side to side
        // let tween = this.scene.add.tween(this).to({x: this.x + 100}, 1000, Phaser.Math.Easing.Linear, true, 0, 1000, true);
        // tween.onLoop.add(this.descend, this);
    }

    descend() {
        this.y += 10;
    }
}
```
{% endcode %}
{% endtab %}

{% tab title="playScene.ts" %}
{% code title="playScene.ts" %}
```typescript
  create(){
    let this.enemy1 = new Enemy(this, window.innerWidth / 2, (window.innerHeight / 4), 'enemy', 100);
    this.enemy1.create('enemy');
  }
  
  update(){
    this.enemy1.update(this.player)
```
{% endcode %}
{% endtab %}
{% endtabs %}

### Challenges <a href="#challenges" id="challenges"></a>

It was quite challenging to work out and figure what functionality I first needed in my enemy class to be able to get it to work, and I needed to figure out what would be essential and found in every enemy that I made. This means that every enemy I made had to have all of these common features, so it was essential that I got them right.&#x20;

Implementing the enemy into the game was a bit tricky to begin with as there's not much documentation on how to use a class as a sprite or game object, and you have to figure it out yourself. The way I did it allows me to use a function within the class itself to be able to make the enemy, and this in turn loads the image, based on where I input the x and y to be. This allows me to keep the enemy class separate from the main scene code, making it easier to debug and to modularise the program. Additionally working this out has given me the solution of how to implement the classes for the player and other enemies later on in the development cycles.&#x20;

Furthermore I've had the issue of getting the entire scene to load in, once I had added the player and enemy to the entity class. This was confusing for me as it had worked just fine before when I was using the just the enemy class and adding it to the scene. For some reason the code wasn't working when I tried to add the player, so I had to find another way of adding the class to the scene.&#x20;

Also getting the enemy's image to update was also challenging in places, as it initially wouldn't move, but the x and y values were changing, which lead me to believe that the image wasn't updating. I managed to fix this, but it was confusing to begin with, as it wasn't a problem that I had with my player, which I did in a similar way. I think this is because I used a class to be able to make the enemy and not a function or variable, which is the 'standard' way of making them.&#x20;

## Testing <a href="#testing" id="testing"></a>

Evidence for testing

### Tests <a href="#tests" id="tests"></a>

| Test                      | Instructions                 | What I expect                                                                  | What actually happens                                                                 | Pass/Fail |
| ------------------------- | ---------------------------- | ------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------- | --------- |
| Insert enemy class        | Simply begin the game.       | The enemy should load in, a quarter of the page down.                          | The enemy doesn't appear                                                              | Fail      |
| Insert enemy class        | Simply begin the game.       | The enemy should load in, a quarter of the page down.                          | The enemy appears in the right place, with the texture and size.                      | Pass      |
| Enemy moves side to side  | Nothing, this is automatic.  | The enemy should begin moving side to side as the game begins.                 | It stays completely still, but in the console it is logging the x\&y to be changing.  | Fail      |
| Enemy moves side to side  | Nothing, this is automatic.  | As you move from side to side you should be able to see the enemy rotate too.  |                                                                                       |           |

### Evidence <a href="#evidence" id="evidence"></a>
